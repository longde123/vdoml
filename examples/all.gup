#!python
from __future__ import print_function
import os, sys, subprocess

projects = os.listdir('.')
projects = filter(os.path.isdir, projects)
projects = filter(lambda p: p[0] not in ['.','_'], projects)
projects = map(lambda base: os.path.join(base, '_build', 'main.js'), projects)
proc = subprocess.Popen(['gup'] + list(projects))
if proc.wait() != 0:
	sys.exit(1)
